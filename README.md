# TI2023
电赛2023
# 软件手心语
电赛期间，压力很大，曾经一度到了没有办法参赛的地步。最后也仅仅完成了基础部分，还是略有些可惜。软件手遇到的最大的两个问题，一是曾经因为单片机没有接公共地导致上升沿一直出问题，二是因为不知道怎么找到合适的速度参数停滞了很久。关于前者，调试的总思想还是应当是化繁为简。先把除了中断的所有代码注释掉或者跳过、所有与中断无关的接线去掉，然后再调试。也可以新建一个最简工程，里面仅包含中断部分，然后再检查。关于后者，总的经验法则就是：设计敲击方案计算声速大小，保持敲击力度并尽可能大，设计算法找到最佳声速区间，多次敲击通过正确率调参。法则的最后一个分句可能是最麻烦，但是也是最有效、最重要的。比较可惜的一点是自己曾经写的Python仿真程序没有写从现有数据倒推敲击位置的功能，导致没有办法找到梯度下降算法存在的问题，最终使得梯度下降算法被弃用。

这道题基础部分除了没有用梯度下降以外，已经做的比较完善了。以前用的算法就是直接用固定的三个点算敲击位置，准确率大概75%，后来发现这样会使得敲击靠近另一个点的位置不太准，于是就改成了最靠近哪个点就用哪个点旁边的点来计算，准确率几乎100%，而且可以精确到12*12的小格内。可以说，经过上述改进，正确率实现了质的飞跃。虽然听说有一种利用多个点的时间差来计算敲击位置的算法，但是我们没搞懂，不得不放弃。

抛开这道题，最大的遗憾还是不会ZYNQ。一开始选题的时候，本来打算选H。但是发现DDS发的波不能与信号源发的波同频稳定显示，不得不放弃。但是，ZYNQ可以通过数字锁相环等等解决这个问题，而且可以把频率范围卷的很宽，那么我们用STM32的就没法做了。哪怕是选择了F，也遇到了类似的问题。STM32检测上升沿需要用到中断，但是ZYNQ可以用过一个D触发器加与门解决问题，这之间的精度差难以想象。ZYNQ能做太多单片机做不到的事情，可惜很难学，无法速通，要打电赛的时候已经来不及了。唉！
